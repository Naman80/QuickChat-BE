model Message {
  id                 String             @id @default(uuid())
  conversationId     String
  senderId           String
  content            String
  contentType        MessageContentType
  deletedForEveryone Boolean            @default(false)
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  // Relations
  conversation       Conversation       @relation("conversationMessages", fields: [conversationId], references: [id])
  sender             User               @relation("messageSender", fields: [senderId], references: [id])

  //just for completing prisma graph
  lastMessage                Conversation?             @relation("lastMessageId")
  participantLastReadMessage ConversationParticipant[] @relation("participantLastReadMessaage")
  messageUserStates          MessageUserState[]

  @@index([conversationId, createdAt])
  @@map("Message")
}

enum MessageContentType {
  text
  image
  video
}

enum MessageStatus {
  sent
  delivered
  read
}
