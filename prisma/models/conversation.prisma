model Conversation {
  id            String           @id @default(uuid())
  type          ConversationType
  directKey     String?          @unique
  lastMessageId String?          @unique
  updatedAt     DateTime         @updatedAt
  createdAt     DateTime         @default(now())

  // Relations
  lastMessage Message? @relation("lastMessageId", fields: [lastMessageId], references: [id])

  //just for completing prisma graph
  messages                 Message[]                 @relation("conversationMessages")
  conversationParticipants ConversationParticipant[] @relation("conversationId")

  @@index([id])
  @@index([directKey])
  @@index([updatedAt])
  @@map("Conversation")
}

enum ConversationType {
  direct
  group
}

enum ParticipantRole {
  admin
  member
}
